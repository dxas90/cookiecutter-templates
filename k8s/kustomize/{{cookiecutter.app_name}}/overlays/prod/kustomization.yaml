apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

patchesStrategicMerge:
  - ./deployment-patch.yaml
{% if cookiecutter.httproute_enabled == 'true' -%}
  - ./httproute-patch.yaml
{% endif -%}
resources:
  - ../../base/

images:
  - name: {{ cookiecutter.image_repository }}
    newTag: {{ cookiecutter.image_tag }}

commonLabels:
  app: {{ cookiecutter.app_label }}
  owner: {{ cookiecutter.owner_label }}
  environment: production

generatorOptions:
  annotations:
    note: generated
    environment: production
  disableNameSuffixHash: true
  labels:
    team: {{ cookiecutter.team_label }}
    type: generated
    environment: production
